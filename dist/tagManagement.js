(()=>{"use strict";document.getElementById("js_copy_site"),document.getElementById("js_copy_tag"),document.getElementById("tag_reference_id");const e=(e,t)=>{const d=`editor${t}`;var a=ace.edit(d);a.$blockScrolling=1/0,a.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1,enableLiveAutocompletion:!1}),a.setTheme("ace/theme/monokai"),a.getSession().setMode("ace/mode/html"),a.getSession().on("change",(function(){var t=a.getValue();n(e,t),o()}))},t=()=>{const e=document.querySelector(".trigger_msg").querySelector(".label").innerHTML,t=document.querySelector(".js_ad_field").value,d=document.querySelector(".js_adNum_field").value,l=document.getElementById("js_type"),n=document.querySelector(".js_adRange_field").value;a.ad_code=t,a.ad_num=d,a.trigger=e,a.ad_range=n,""===a.ad_range?a.applygingAll="checked":a.applygingAll="unchecked",l.value=""!==t&&""!==d&&"1"!==n?"withCodeRange":""!==t&&""!==d&&"1"===n?"withCode":"withoutCode",i()},d=(document.getElementById("js_domain_add_modal"),document.getElementById("js_info_modal"),document.querySelector(".bg-gray"));document.querySelector(".bg-gray2"),document.querySelector(".admin_modal_container");let a={trigger:"",ad_code:"",ad_range:"",ad_num:"",tag_head:"",tag_body:"",applygingAll:""};const l=(e,t)=>{a[e]=t,i()},n=(e,t)=>{/^[\s]*$/.test(t)?a[e]="":a[e]=t,i()},r=e=>{a[e]=""},o=()=>{const e=document.getElementById("tag_head"),t=document.getElementById("tag_body");/^[\s]*$/.test(a.tag_head)?e.value="":e.value=a.tag_head,/^[\s]*$/.test(a.tag_body)?t.value="":t.value=a.tag_body},c=()=>{const e=document.getElementById("js_type");a.ad_code&&a.ad_num&&"1"===a.ad_range&&(e.value="withCode"),a.ad_code&&a.ad_num&&""!==a.ad_range&&"1"!==a.ad_range&&(e.value="withCodeRange")},s=()=>{document.querySelector(".tag_form").classList.remove("activeTrigger")},u=(e,t)=>{e.classList.add("hidden"),t.classList.remove("hidden")},i=()=>{const e=document.getElementById("js_tagCreate_btn");(()=>{let e=v();return"checked"===a.applygingAll?e.trigger_all:e.trigger_exceptAllWithAdRange&&e.trigger_exceptAllWithAdRAnge_dataCheck})()?e.classList.remove("disabled_btn"):e.classList.add("disabled_btn")},_=e=>{e.parentNode.querySelector(".alert_txt").classList.remove("hidden"),e.parentNode.querySelector(".label").classList.add("red"),e.classList.add("alert_active")},g=e=>{e.parentNode.querySelector(".alert_txt").classList.add("hidden"),e.parentNode.querySelector(".label").classList.remove("red"),e.classList.remove("alert_active")},m=e=>/^[0-9]+$/.test(e),y=e=>/^[A-Za-z\s!-/:-@\[-`{-~]+$/.test(e),h=(e,t,d)=>e>=t&&e<=d,v=()=>({trigger_all:Boolean(a.trigger&&(a.tag_head||a.tag_body)),trigger_exceptAll:Boolean(a.trigger&&a.ad_code&&a.ad_num&&(a.tag_head||a.tag_body)),trigger_exceptAllWithAdRange:Boolean(a.trigger&&a.ad_code&&a.ad_num&&a.ad_range&&(a.tag_head||a.tag_body)),trigger_exceptAll_dataCheck:Boolean(y(a.ad_code)&&m(a.ad_num)),trigger_exceptAllWithAdRAnge_dataCheck:Boolean(y(a.ad_code)&&m(a.ad_num)&&m(a.ad_range)&&h(a.ad_range,1,100))});{const e=document.querySelector(".dummy_down"),t=document.querySelector(".dummy_up"),d=document.querySelector(".js_arrowDown_btn"),a=document.querySelector(".js_arrowUp_btn");e&&e.addEventListener("click",(()=>{document.querySelector(".tag_form").classList.add("activeTrigger"),u(d,a),e.classList.add("hidden"),t.classList.remove("hidden")})),t&&t.addEventListener("click",(()=>{u(a,d),s(),e.classList.remove("hidden"),t.classList.add("hidden")}))}{const e=document.querySelectorAll(".js_trigger_btns"),t=document.querySelector(".js_arrowDown_btn"),d=document.querySelector(".js_arrowUp_btn");e.forEach((e=>{e.addEventListener("click",(e=>{document.querySelector(".dummy_down").classList.remove("hidden"),document.querySelector(".dummy_up").classList.add("hidden");let a=e.currentTarget.getAttribute("data-type");(e=>{const t=document.querySelector(".js_trigger");document.querySelector(".trigger_msg").querySelector(".label").innerHTML=e,t.value=e})(a),l("trigger",a),s(),u(d,t),i()}))}))}{const e=document.querySelector(".js_ad_field"),t=document.querySelector(".js_adNum_field"),d=document.querySelector(".js_adRange_field");null!==e&&e.addEventListener("input",(()=>{y(e.value)?g(e):""==e.value?(r("ad_code"),g(e)):_(e),l("ad_code",e.value),c(),i()})),null!==t&&t.addEventListener("input",(()=>{m(t.value)?g(t):""==t.value?(r("ad_num"),g(t)):_(t),l("ad_num",t.value),i(),c()})),null!==d&&d.addEventListener("input",(()=>{m(d.value)&&h(d.value,1,100)?g(d):""==d.value?(r("ad_range"),g(d)):_(d),l("ad_range",d.value),c(),i()}));const a=document.getElementById("apply_all");null!==a&&a.addEventListener("change",(()=>{a.checked?(document.getElementById("js_type").value="withoutCode",l("applygingAll","checked"),(()=>{const e=document.querySelectorAll(".js_data_field");document.querySelector(".js_adCode").querySelectorAll(".domain_name_input").forEach((e=>{e.value=""})),e.forEach((e=>{e.style.background="#80808026",e.style.cursor="not-allowed",e.setAttribute("readonly",!0),g(e)}))})()):(l("applygingAll","unchecked"),document.querySelectorAll(".js_data_field").forEach((e=>{e.style.background="transparent",e.style.cursor="text",e.removeAttribute("readonly")}))),i()}))}{const e=document.querySelectorAll(".js_close_btns2"),t=document.querySelectorAll(".js_modals");e.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>{(e=>{e.classList.add("hidden"),d.classList.add("hidden")})(e)}))}))}))}e("tag_head",1),t(),e("tag_body",2),t()})();