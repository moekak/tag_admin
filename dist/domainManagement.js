(()=>{"use strict";const e=document.getElementById("js_copy_site"),t=document.getElementById("js_copy_tag"),n=document.getElementById("tag_reference_id"),a=()=>{document.querySelector(".js_form").style.display="none",document.querySelector(".domain_add_modal_main").style.height="15%"},o=e=>{const t=`Fetch error: ${e.message}, Detailed error: ${e.stack}, ${new Date}`;fetch("/src/fetch/logErrorFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},d=()=>{window.location.href="/error"},r=()=>{const r=document.getElementById("js_domain_id").value;fetch("/src/fetch/getSpecificDomainInfoFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((o=>{(o=>{document.getElementById("js_create_btn").classList.remove("disabled_btn"),(e=>{const t=document.getElementById("js_domain_name"),n=document.getElementById("domain_name"),a=document.getElementById("js_domain_id");t.value=e[0].domain_name,n.value=e[0].domain_name,a.value=e[0].id,i.domain_name=e[0].domain_name,i.domain_id=e[0].id})(o),(e=>{const t=document.getElementById("js_domain_category");i.domain_category=`${e[0].domain_category_id}`,t.value=e[0].domain_category_id})(o),(e=>{const t=document.getElementById("js_domain_type");i.domain_type=e[0].domain_type,t.value=e[0].domain_type})(o),(e=>{const t=document.getElementById("js_tag_type");null===e[0].parent_tag_id||void 0===e[0].parent_tag_id?(i.tag_type="new",t.value="new"):"0"===e[0].random_domain_id?(i.tag_type="withoutTag",t.value="withoutTag"):(i.tag_type="reference",t.value="reference")})(o),(a=>{null!==a[0].parent_domain_id?(a[0].original_parent_id?(document.getElementById("js_original_domain_id").value=a[0].original_parent_id,i.original_domain_id=`${a[0].original_parent_id}`):(document.getElementById("js_original_domain_id").value=a[0].parent_domain_id,i.original_domain_id=`${a[0].parent_domain_id}`),i.copy_reference_id=`${a[0].parent_domain_id}`,document.getElementById("js_copy_reference_id").value=a[0].parent_domain_id,c(a,"parent_domain_id","copy_reference",e),null!==a[0].parent_tag_id&&(n.value=a[0].parent_tag_id,i.tag_reference_id=`"${a[0].parent_tag_id}"`,document.getElementById("js_tag_reference_id").value=a[0].parent_tag_id,c(a,"parent_tag_id","tag_reference",t))):(i.copy_reference_id="",i.tag_reference_id="",i.original_domain_id="",e.querySelector(".label").innerHTML="コピーサイト参照先",t.querySelector(".label").innerHTML="タグ参照先"),t.disabled=!0,e.disabled=!0})(o),a()})(o)})).catch((e=>{o(e),d()}))},c=(e,t,n,a)=>{const r=e[0][t];fetch("/src/fetch/getParentDomainFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((e=>{e?(i[n]=`${e}`,a.querySelector(".label").innerHTML=e):(i[n]="",a.querySelector(".label").innerHTML="コピーサイト参照先")})).catch((e=>{o(e),d()}))};let i={domain_name:"",domain_category:"",domain_type:"",tag_type:"",copy_reference:"",tag_reference:"",copy_reference_id:"",original_domain_id:"null",tag_reference_id:"",domain_id:""};const l=()=>{const e=j(),t=["domain_name","copy_reference_id","original_domain_id","tag_reference_id","domain_type","domain_id","copy_reference","domain_category","tag_reference","tag_type"];for(let n=0;n<t.length;n++)document.getElementById(`js_${t[n]}`)&&(document.getElementById(`js_${t[n]}`).value=e[t[n]]||""),i[t[n]]=e[t[n]]||""},s=()=>{const e=j();document.getElementById("domain_name").value=e.domain_name||"";const t=document.querySelectorAll('input[name="type"]'),n=document.querySelectorAll('input[name="tag_types"]'),a=document.querySelector(".copy_reference").querySelector(".label"),o=document.querySelector(".tag_reference").querySelector(".label"),d=document.querySelectorAll('input[name="category"]');t.forEach((t=>{t.value==e.domain_type&&(t.checked=!0)})),n.forEach((t=>{t.value==e.tag_type&&(t.checked=!0)})),d.forEach((t=>{e.domain_category&&t.value==e.domain_category&&(t.checked=!0)})),""!==e.copy_reference&&(document.querySelector(".copy_reference").disabled=!1,a.innerHTML=e.copy_reference),""!==e.tag_reference&&(o.innerHTML=e.tag_reference,document.querySelector(".tag_reference").disabled=!1)},m=e=>{document.querySelector(`${e}`).innerHTML=""},_=(e,t,n)=>{m(t);const a=document.querySelector(`${t}`);e.forEach((e=>{a.appendChild(S(e,n))}))},y=(e,t)=>{const n=document.getElementById("js_tag_reference_id");let a=t.currentTarget,o=a.querySelector(".label").getAttribute("data-id"),d=a.querySelector(".label").innerHTML;e.querySelector(".label").innerHTML=d,n.value=o,i.tag_reference=d,i.tag_reference_id=o,f("add")},u=()=>Boolean("original"===i.domain_type),g=()=>Boolean("new"===i.tag_type||""==i.tag_type),p=()=>{u()?(document.querySelector(".cateogory_area").style.display="block",document.querySelector(".copy_area").style.display="none",document.querySelector(".js_withoutTag").style.display="none"):(document.querySelector(".cateogory_area").style.display="none",document.querySelector(".copy_area").style.display="block",document.querySelector(".js_withoutTag").style.display="inline-block")},h=()=>{const e=document.getElementById("js_copy_tag");e.disabled=g(),g(),e.querySelector(".label").innerHTML="タグ参照先",i.tag_reference="",i.tag_reference_id=""},f=e=>{const t=document.getElementById("js_create_btn"),n=i||j();if("edit"!=e){const e=Boolean(n.domain_name&&n.domain_category&&"original"==n.domain_type&&"new"===n.tag_type),a=Boolean(n.domain_name&&n.domain_category&&"original"==n.domain_type&&"reference"===n.tag_type&&n.tag_reference&&n.tag_reference_id),o=Boolean(n.domain_name&&n.domain_category&&("copy"===n.domain_type||"directory"===n.domain_type)&&"new"===n.tag_type&&n.copy_reference&&n.copy_reference_id&&n.original_domain_id),d=Boolean(n.domain_name&&n.domain_category&&("copy"===n.domain_type||"directory"===n.domain_type)&&"new"!==n.tag_type&&n.copy_reference&&n.copy_reference_id&&n.original_domain_id&&n.tag_reference&&n.tag_reference_id),r=Boolean(n.domain_name&&n.domain_category&&("copy"===n.domain_type||"directory"===n.domain_type)&&"withoutTag"===n.tag_type&&n.copy_reference&&n.copy_reference_id&&n.original_domain_id&&n.tag_reference&&n.tag_reference_id);t.classList.toggle("disabled_btn",!(e||o||d||a||r))}},E=(e,t,n,a,o)=>{/^[\s]*$/.test(n)||""===n?a[e]="":a[e]=n,document.getElementById(`js_${t}`).value=n,f(o),p(),(()=>{const e=document.getElementById("js_copy_site");i.domain_type&&(e.disabled=u(),u()&&(e.querySelector(".label").innerHTML="コピーサイト参照先"))})(),h(),b("data"),w()},v=e=>{document.querySelectorAll(".js_categories").forEach((t=>{t.getAttribute("data-category-id")===e?t.classList.add("active"):t.classList.remove("active")}))},S=(e,t)=>{const n=`<p class="label" style="margin: 0;" data-category-id="${e.domain_category_id}" data-id="${e.id}" data-original-id="${e.original_parent_id}">${e.domain_name} </p>`,a=document.createElement("div");return a.classList.add(t),a.innerHTML=n.trim(),a},j=()=>{const e=localStorage.getItem("data");return JSON.parse(e)},b=e=>{localStorage.removeItem(e)},L=()=>localStorage.getItem("category_id"),q=()=>{i.copy_reference="",i.copy_reference_id="",i.original_domain_id="",i.domain_category="",i.domain_name="",i.domain_type="",i.tag_reference="",i.tag_reference_id="",i.tag_type="",f("add")},T=()=>{""===document.getElementById("js_error").innerHTML&&($(),q()),f("add")},I=e=>{e.forEach((e=>{e.checked=!1})),f("add")},B=(e,t,n)=>{e.querySelector(".label").innerHTML=t,e.disabled=!0,document.getElementById(n).value="",f("add")},$=()=>{const e=document.getElementById("domain_name"),t=document.querySelectorAll('input[name="type"]'),n=document.querySelectorAll('input[name="category"]'),a=document.querySelectorAll('input[name="tag_types"]'),o=document.getElementById("js_copy_site"),d=document.getElementById("js_copy_tag"),r=document.querySelectorAll(".js_tagCheck");e.value="",I(t),I(n),I(a),I(r),B(o,"コピーサイト参照先","js_copy_reference_id"),B(d,"タグ参照先","js_tag_reference_id"),document.querySelector(".cateogory_area").style.display="none";const c=document.querySelector(".tagInfo_area");"none"==c.style.display&&(c.style.display="block")},k=()=>{i.copy_reference="",i.copy_reference_id="",i.original_domain_id="",f("add")},w=()=>{"original"===i.domain_type&&k(),f("add")},H=()=>{const e=document.getElementById("js_search_domain");document.querySelector(".domain_search_results_container").innerHTML="",e.value=""},M=(e,t)=>{e.addEventListener("click",(()=>{navigator.clipboard.writeText(t).then((()=>{document.querySelector(".js_copy_success").classList.remove("hidden"),setTimeout((()=>{document.querySelector(".js_copy_success").classList.add("hidden")}),1e3)})).catch((e=>{}))}))},A=e=>{new bootstrap.Collapse(e,{toggle:!1}).hide()};let x;const O=document.getElementById("js_domain_add_modal"),D=document.getElementById("js_info_modal"),N=document.querySelector(".bg-gray"),C=document.querySelector(".bg-gray2"),P=document.querySelector(".admin_modal_container"),J=()=>{O.style.transform="translateX(0px)",N.classList.remove("hidden")},F=()=>{O.style.transform="translateX(0px)",O.style.transition="0s",N.classList.remove("hidden")},X=()=>{document.querySelectorAll(".edit_modal_btns").forEach((e=>{e.addEventListener("click",(e=>{(e=>{const t=document.querySelectorAll(".js_selectedID"),n=document.querySelector(".js_isActive");document.getElementById("js_error").innerHTML="",k(),T();let a=e.currentTarget,o=a.getAttribute("data-id");t.forEach((e=>{e.value=o})),n.value=a.getAttribute("data-id-active")})(e),(()=>{const e=document.querySelector(".js_selectedID").value;fetch("/src/fetch/checkTagID.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((e=>{const t=document.querySelector(".js_delete_tag").getElementsByTagName("p");if(e.length<=0){for(var n=0;n<t.length;n++)t[n].classList.remove("red"),t[n].style.color="rgba(255, 0, 0, 0.25)";const e=document.querySelector(".js_delete_tag").getElementsByTagName("img");for(n=0;n<e.length;n++)e[n].src="/public/img/trash_2.png";document.querySelector(".js_delete_tag").style.pointerEvents="none"}else{for(n=0;n<t.length;n++)t[n].style.color="red";const e=document.querySelector(".js_delete_tag").getElementsByTagName("img");for(n=0;n<e.length;n++)e[n].src="/public/img/trash.png";document.querySelector(".js_delete_tag").style.pointerEvents="auto"}})).catch((e=>{o(e),d()}))})(),(()=>{const e=document.querySelector(".js_selectedID").value;fetch("/src/fetch/checkCopySite.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((e=>{e.length>0?(()=>{const e=document.querySelector(".js_delete_domain");e.getElementsByTagName("p")[0].classList.remove("red"),e.getElementsByTagName("p")[0].style.color="rgba(255, 0, 0, 0.25)",e.getElementsByTagName("img")[0].src="/public/img/trash_2.png"})():(()=>{const e=document.querySelector(".js_delete_domain");e.getElementsByTagName("p")[0].classList.add("red"),e.getElementsByTagName("p")[0].style.color="red",e.getElementsByTagName("img")[0].src="/public/img/trash.png"})()})).catch((e=>{o(e),d()}))})(),"0"===document.querySelector(".js_isActive").value?(document.getElementById("active_check").innerHTML="使用する",document.getElementById("active_status").value="使用する"):document.getElementById("active_status").value="使用しない",setTimeout((()=>{P.classList.remove("hidden"),N.classList.remove("hidden")}),100)}))}))},R=()=>{fetch("/src/fetch/getDomainInfoAll.php",{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((e=>{W(e),X()})).catch((e=>{o(e),d()}))},W=e=>{const t=document.querySelector(".js_table");t.innerHTML="";t.insertAdjacentHTML("beforeend",' <thead style="position: sticky; top: 0;" id="js_table">\n            <tr>\n                <th scope="col" style="width: 376px;">ドメイン名</th>\n                <th scope="col">オリジナルLP</th>\n                <th scope="col">ステータス</th>\n                <th scope="col">ドメインID</th>\n                <th></th>\n            </tr>\n        </thead>'.trim()),e.forEach((e=>{let n=null==e.copy?"":z(e.copy),a=null==e.directory?"":K(e.directory);const o="original"===e.domain_type?"〇":"",d="0"===e.is_active?"red":"green",r="0"===e.is_active?"未使用":"使用",c="original"===e.domain_type?"table-light":"",i="0"==e.random_domain_id?e.tag_reference_randomID:e.random_domain_id,l=`/showTag/?id=${e.id}`,s=`<tbody>\n            <tr class="${c}" data-id=${e.id}>\n                <td class="domain_name align-middle"><a href="${l}" class="textdecoration_none">${e.domain_name}</a></td>\n                <td class="original_check align-middle">${o}</td>\n                <td class="align-middle ${d}">${r}</td>\n                <td class="text_color align-middle">${i}</td>\n                <td class="text_color align-middle edit_modal_btns" data-id="${e.id}" data-id-active=${e.is_active}><i class="fas fa-ellipsis-v text_color"></i></td>                                 \n            </tr>\n            ${a}\n            ${n}\n        </tbody>`;t.insertAdjacentHTML("beforeend",s.trim())}))},z=e=>{let t="";return e.forEach((e=>{let n=null==e.directory?"":G(e.directory);const a="0"===e.is_active?"red":"green",o="0"===e.is_active?"未使用":"使用",d="0"==e.random_domain_id?e.tag_reference_randomID:e.random_domain_id,r=`/showTag/?id=${e.id}`;t+=`<tr class="js_copySites">\n            <td class="domain_name align-middle"style="padding-left: 8%;">\n                <div class="img_container">\n                    <img src="/public/img/copy1.png" alt="" class="copy_icon">\n                </div>\n                <div class="hyper_link">\n                    <a href="${r}" class="textdecoration_none">${e.domain_name}</a>\n                </div>\n            </td>\n            <td class="original_check align-middle"></td>\n            <td class="align-middle ${a}">${o}</td>\n            <td class="text_color align-middle">${d}</td>\n            <td class="text_color align-middle edit_modal_btns js_tables" data-id="${e.id}" data-id-active=${e.is_active}><i class="fas fa-ellipsis-v text_color"></i></td>                                 \n        </tr>\n        ${n}\n\n        `})),t},G=e=>{let t="";return e.forEach((e=>{const n="0"===e.is_active?"red":"green",a="0"===e.is_active?"未使用":"使用",o="0"==e.random_domain_id?e.tag_reference_randomID:e.random_domain_id,d=`/showTag/?id=${e.id}`;t+=`<tr class="js_copySites">\n            <td class="domain_name align-middle" style="padding-left: 16%;">\n                <div class="img_container">\n                    <img src="/public/img/folder.png" alt="" class="copy_icon">\n                </div>\n                <div class="hyper_link">\n                    <a href="${d}" class="textdecoration_none">${e.domain_name}</a>\n                </div>\n            </td>\n            <td class="original_check align-middle"></td>\n            <td class="align-middle ${n}">${a}</td>\n            <td class="text_color align-middle">${o}</td>\n            <td class="text_color align-middle edit_modal_btns js_tables" data-id="${e.id}" data-id-active=${e.is_active}><i class="fas fa-ellipsis-v text_color"></i></td>                                 \n        </tr>\n        `})),t},K=e=>{let t="";return e.forEach((e=>{const n="0"===e.is_active?"red":"green",a="0"===e.is_active?"未使用":"使用",o="0"==e.random_domain_id?e.tag_reference_randomID:e.random_domain_id,d=`/showTag/?id=${e.id}`;t+=`<tr class="js_copySites">\n            <td class="domain_name align-middle" style="padding-left: 8%;">\n                <div class="img_container">\n                    <img src="/public/img/folder.png" alt="" class="copy_icon">\n                </div>\n                <div class="hyper_link">\n                    <a href="${d}" class="textdecoration_none">${e.domain_name}</a>\n                </div></td>\n            <td class="original_check align-middle"></td>\n            <td class="align-middle ${n}">${a}</td>\n            <td class="text_color align-middle">${o}</td>\n            <td class="text_color align-middle edit_modal_btns js_tables" data-id="${e.id}" data-id-active=${e.is_active}><i class="fas fa-ellipsis-v text_color"></i></td>                                 \n        </tr>`})),t};var Q;L()||("all",localStorage.setItem("category_id","all")),"all"===L()?(R(),v(L())):(Q=L(),fetch("/src/fetch/sortDomainDataByCategory.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((e=>{W(e),X()})).catch((e=>{o(e),d()})),v(L())),(()=>{const e=document.querySelector(".js_search_domain");let t;e.addEventListener("input",(n=>{clearTimeout(t),t=setTimeout((()=>{if(""==n.target.value)R();else{const t={keyword:e.value,category_id:L()};fetch("/src/fetch/searchDomainDataFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((e=>{W(e),X()})).catch((e=>{o(e),d()}))}}),300)}))})(),"edit"===document.getElementById("js_error2").value&&(document.getElementById("js_domain_top_txt").innerHTML="ドメイン編集",document.getElementById("js_create_btn").innerHTML="更新",a()),document.getElementById("js_domain_add").addEventListener("click",(()=>{document.querySelector(".js_form").style.display="block",document.querySelector(".domain_add_modal_main").style.height="70%",document.querySelectorAll('input[name="domain_type"]').forEach((e=>{e.disabled=!1})),A(document.getElementById("collapseExample1")),A(document.getElementById("tag_reference_collapse")),H(),T(),document.getElementById("js_domain_top_txt").innerHTML="ドメイン追加",document.getElementById("js_create_btn").innerHTML="追加",document.getElementById("js_domain_id").value="",J()})),document.querySelectorAll(".js_close_btns").forEach((e=>{e.addEventListener("click",(()=>{O.style.transform="translateX(960px)",O.style.transition="0.5s",N.classList.add("hidden")}))}));{const e=document.querySelectorAll(".js_close_btns2"),t=document.querySelectorAll(".js_modals");e.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>{(e=>{e.classList.add("hidden"),N.classList.add("hidden")})(e)}))}))})),document.querySelector(".domain_modal_btn").addEventListener("click",(()=>{$(),q(),document.getElementById("js_error").innerHTML=""}))}{const e=document.getElementById("js_info_btn"),t=document.querySelector(".bg-gray2");e.addEventListener("click",(()=>{C.classList.remove("hidden"),D.classList.remove("hidden")})),t.addEventListener("click",(()=>{C.classList.add("hidden"),D.classList.add("hidden")}))}{const e=document.getElementById("domain_name"),t=document.querySelectorAll('input[name="type"]'),n=document.querySelectorAll('input[name="category"]'),a=document.querySelectorAll('input[name="tag_types"]'),o=document.querySelector(".js_tagCheck"),d=document.getElementById("js_create_btn");e.addEventListener("input",(e=>{E("domain_name","domain_name",e.target.value,i,"add")})),t.forEach((e=>{e.addEventListener("change",(e=>{"original"==e.target.value&&(A(document.getElementById("collapseExample1")),document.getElementById("js_search_domain").value="",document.querySelector(".domain_search_results_container").innerHTML=""),E("domain_type","domain_type",e.target.value,i,"add")}))})),n.forEach((e=>{e.addEventListener("change",(e=>{E("domain_category","domain_category",e.target.value,i,"add")}))})),a.forEach((e=>{e.addEventListener("change",(e=>{A(document.getElementById("tag_reference_collapse")),document.getElementById("js_search_tag").value="",setTimeout((()=>{document.querySelector(".tag_search_results_container").innerHTML=""}),500),E("tag_type","tag_type",e.target.value,i,"add")}))})),o.addEventListener("change",(e=>{E("tag_type","tag_type",e.target.value,i,"add")})),d.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=JSON.stringify(i);localStorage.setItem("data",e)})();const t=document.getElementById("js_create_form");"追加"===d.innerHTML?t.action="/create":"更新"===d.innerHTML&&(t.action="/edit"),t.submit()}))}{const e=document.getElementById("js_copy_site");document.getElementById("collapseExample1"),e.addEventListener("click",(()=>{A(document.getElementById("tag_reference_collapse")),(e=>{const t=document.getElementById("js_search_domain");let n;t.addEventListener("input",(()=>{clearTimeout(n);const a=document.getElementById("js_domain_id").value;n=setTimeout((()=>{const n={keyword:t.value,domain_id:a||""};fetch("/src/fetch/searchDomainFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((t=>{t.length<=0?m(".domain_search_results_container"):(_(t,".domain_search_results_container","domain_search_container_result"),document.querySelectorAll(".domain_search_container_result").forEach((t=>{t.addEventListener("click",(t=>{((e,t)=>{const n=document.getElementById("js_copy_reference_id"),a=document.getElementById("js_original_domain_id"),o=document.getElementById("js_domain_category");let d=t.currentTarget,r=d.querySelector(".label").getAttribute("data-id"),c=d.querySelector(".label").innerHTML,l=d.querySelector(".label").getAttribute("data-category-id"),s=d.querySelector(".label").getAttribute("data-original-id");e.querySelector(".label").innerHTML=c,n.value=r,o.value=l,a.value="null"==s?r:s,i.copy_reference=c,i.copy_reference_id=r,i.domain_category=l,i.original_domain_id="null"===s?r:s,f("add"),h()})(e,t),A(document.getElementById("collapseExample1"))}))})))})).catch((e=>{o(e),d()}))}),300)}))})(e)}))}{const e=document.getElementById("js_copy_tag"),t=document.getElementById("js_search_tag");t.addEventListener("input",(()=>{const n=document.getElementById("js_domain_id").value,a={keyword:t.value,domain_id:n||""};"withoutTag"===i.tag_type?((e,t)=>{clearTimeout(x),x=setTimeout((()=>{fetch("/src/fetch/searchDomainFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((t=>{const n=new Set,a=t.filter((e=>!n.has(e.id)&&(n.add(e.id),!0)));_(a,".tag_search_results_container","tag_search_container_result"),document.querySelectorAll(".tag_search_container_result").forEach((t=>{t.addEventListener("click",(t=>{y(e,t),A(document.getElementById("tag_reference_collapse"))}))}))})).catch((e=>{o(e),d()}))}),300)})(e,a):"reference"===i.tag_type&&((e,t)=>{clearTimeout(x),x=setTimeout((()=>{fetch("/src/fetch/getTagReferenceInfoFetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()})).then((t=>{const n=new Set,a=t.filter((e=>!n.has(e.id)&&(n.add(e.id),!0)));_(a,".tag_search_results_container","tag_search_container_result"),document.querySelectorAll(".tag_search_container_result").forEach((t=>{t.addEventListener("click",(t=>{y(e,t),A(document.getElementById("tag_reference_collapse"))}))}))})).catch((e=>{o(e),d()}))}),300)})(e,a)}))}{const e=document.getElementById("js_error"),t=document.getElementById("js_create_btn").innerHTML;""!==e.innerHTML&&"追加"==t&&(document.getElementById("js_create_btn").classList.remove("disabled_btn"),F(),l(),p(),s(),f("add")),""!==e.innerHTML&&"更新"==t&&(document.getElementById("js_create_btn").classList.remove("disabled_btn"),F(),l(),s(),f("edit"))}{const e=document.getElementById("js_success"),t=document.querySelector(".copy_btn_script"),n=document.querySelector(".copy_btn_script2"),a=document.querySelector(".script_txt"),o=document.querySelector(".script_txt2");1==document.getElementById("script_flag").value&&(document.getElementById("js_script_modal").classList.remove("hidden"),document.querySelector(".bg-gray").classList.remove("hidden"),M(t,a.textContent),M(n,o.textContent)),""!==e.innerHTML?(e.classList.remove("hidden"),$(),q(),f("add"),setTimeout((()=>{e.classList.add("hidden")}),1500)):e.classList.add("hidden")}document.querySelector(".js_close_btns3").addEventListener("click",(()=>{document.querySelector(".script_area").classList.add("hidden"),document.querySelector(".bg-gray").classList.add("hidden")})),X();{const e=document.querySelectorAll(".domains_edit"),t=document.querySelector(".admin_modal_container");e.forEach((e=>{e.addEventListener("click",(()=>{A(document.getElementById("collapseExample1")),A(document.getElementById("tag_reference_collapse")),H(),document.getElementById("js_domain_id").value=e.querySelector(".js_selectedID").value,J(),t.classList.add("hidden");const n=document.getElementById("js_domain_top_txt"),a=document.getElementById("js_create_btn");n.innerHTML="ドメイン編集",a.innerHTML="更新",r()}))}))}document.querySelector(".js_delete_domain").addEventListener("click",(e=>{document.querySelector(".domain_delete_modal_container").classList.remove("hidden")}));{document.querySelector(".js_delete_tag").addEventListener("click",(e=>{(e=>{const t=document.querySelector(".js_selectedID").value;return fetch("/src/fetch/getDomainWithTagReference.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("サーバーエラーが発生しました。");return e.json()}))})().then((e=>{var t;t=e,new Promise((e=>{const n=document.querySelector(".domain_index");n.innerHTML="";let a="";t.length>0?t.forEach((e=>{a=`<a href="/showTag/?id=${e.id}">${e.domain_name}</a><br>`,n.insertAdjacentHTML("beforeend",a.trim())})):(a='<p class="txt_small">このタグを使用してるドメインはありません</p>',n.insertAdjacentHTML("beforeend",a.trim())),e()}))})).then((()=>{document.querySelector(".tag_delete_modal_container").classList.remove("hidden")}))}));const e=document.querySelectorAll(".js_delete_btn"),t=document.querySelectorAll(".js_alert_modal"),n=document.querySelector(".bg-gray");e.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>{e.classList.add("hidden"),n.classList.add("hidden");const t=document.querySelector(".domain_index");null!==t&&(t.innerHTML="")}))}))})),document.querySelector(".js_delete").addEventListener("click",(()=>{document.querySelector(".loading").classList.remove("hidden")}))}{document.querySelector(".fa-cog").addEventListener("click",(()=>{document.querySelector(".category_add_modal-container").classList.remove("hidden"),document.querySelector(".bg-gray").classList.remove("hidden")})),document.querySelectorAll(".js_edit_category").forEach((e=>{e.classList.add("disabled_btn")}));const e=document.querySelectorAll(".js_category_form");e.forEach((t=>{t.addEventListener("input",(function(t){let n=this.parentElement;""!==t.target.value?n.querySelector(".js_edit_category").classList.remove("disabled_btn"):n.querySelector(".js_edit_category").classList.add("disabled_btn");let a=Array.from(e).filter((e=>e.parentElement!==n));a.forEach((e=>{e.parentElement.querySelector(".js_edit_category").classList.add("disabled_btn")}))}))}))}})();